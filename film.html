<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–§—ñ–ª—å–º ‚Äî Relax Kino</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet">


  <style>
    .film-container { display: flex; flex-wrap: wrap; gap: 40px; margin-top: 40px; align-items: flex-start; }
    .film-left {
      flex: 1;
      min-width: 300px;
      max-width: 380px;
      width: 100%;
      background: #0b0b0b;
      border-radius: 12px;
      padding: 14px 16px;
      box-shadow: 0 0 18px rgba(0, 0, 0, 0.4);
      border: 1px solid rgba(255, 255, 255, 0.06);
      text-align: center;
    }
    .film-left img { width: 95%; max-width: 275px; border-radius: 10px; margin: 0 auto; display: block;
      box-shadow: 0 0 20px rgba(0, 255, 255, 0.25); border: 1px solid rgba(0, 255, 255, 0.25); transition: transform 0.3s ease; }
    .film-left img:hover { transform: scale(1.05); }
    /* --- –Ω–æ–≤–∏–π —Å—É—á–∞—Å–Ω–∏–π —á–æ—Ä–Ω–∏–π –±–ª–æ–∫ --- */
/* --- —á–æ—Ä–Ω–∏–π –∫–æ–º–ø–∞–∫—Ç–Ω–∏–π —Å—Ç–∏–ª—å –±–µ–∑ –∞–Ω—ñ–º–∞—Ü—ñ–π --- */
.film-meta {
  background: #0e0e0e;
  border-radius: 10px;
  padding: 12px 14px;
  margin-top: 14px;
  border: 1px solid rgba(255,255,255,0.06);
  display: flex;
  flex-direction: column;
  gap: 5px;
  box-shadow: inset 0 0 10px rgba(0,0,0,0.3);
}

.film-meta span {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: #131313;
  padding: 6px 10px;
  border-radius: 6px;
  color: #d8d8d8;
  font-size: 14px;
  font-weight: 500;
}

.film-meta span b {
  color: #888;
  font-weight: 600;
}

.film-meta span span {
  color: #eaeaea;
  font-weight: 600;
}

/* –±–µ–∑ –µ—Ñ–µ–∫—Ç—ñ–≤ –Ω–∞–≤–µ–¥–µ–Ω–Ω—è */
.film-meta span:hover,
.film-meta span:active {
  background: #131313;
  transform: none;
}


    .film-right { flex: 2; min-width: 400px; }
    .film-title { font-size: 28px; color: #00fff2; text-shadow: 0 0 18px #00fff2a0; margin-bottom: 15px; font-weight: 700; }

    /* –ü–µ—Ä–µ–º–∏–∫–∞—á –¥–∂–µ—Ä–µ–ª–∞ */
    .source-switch { display: flex; gap: 10px; margin: 0 0 10px 2px; }
    .source-switch button {
      padding: 10px 14px; border-radius: 10px; border: 1px solid rgba(0,255,242,0.35);
      background: #0f0f0f; color: #e9fefe; cursor: pointer; font-weight: 600;
      box-shadow: 0 0 18px rgba(0,255,242,0.1);
      transition: transform .12s ease, box-shadow .12s ease, background .12s ease, color .12s ease;
    }
    .source-switch button:hover { transform: translateY(-1px); box-shadow: 0 0 22px rgba(0,255,242,0.18); }
    .source-switch button.active {
      background: #0f0f0f;   /* —á–æ—Ä–Ω–∏–π */
      color: #e9fefe;        /* —Å–≤—ñ—Ç–ª–∏–π —Ç–µ–∫—Å—Ç */
      border: 1px solid rgba(0,255,242,0.35);
    }
    .source-switch button:disabled { opacity: .45; cursor: not-allowed; }

    .player-box { position: relative; background: #000; border-radius: 12px; border: 1px solid rgba(0,255,242,0.3); overflow: hidden; box-shadow: 0 0 30px rgba(0,255,242,0.15); }
    video { width: 100%; height: auto; display: block; border-radius: 12px; aspect-ratio: 16/9; }
    .film-description { margin-top: 25px; background: #1a1a1a; border-radius: 12px; border: 1px solid rgba(0,255,242,0.2);
      box-shadow: 0 0 30px rgba(0,255,242,0.1); padding: 20px 24px; color: #ddd; font-size: 16px; line-height: 1.7; }
    footer { margin-top: 80px; }
    /* –µ—Ñ–µ–∫—Ç –Ω–∞–≤–µ–¥–µ–Ω–Ω—è –Ω–∞ –≤–µ–ª–∏–∫—É –∫–Ω–æ–ø–∫—É Play */
    #bigPlayBtn:hover svg {
      transform: scale(1.1);
      filter: drop-shadow(0 0 8px #00fff2);
      transition: transform 0.25s ease, filter 0.25s ease;
    }

    .film-title{
  font-family: "Bebas Neue", system-ui, sans-serif;
  font-size: 42px;
  line-height: 1.05;
  letter-spacing: .5px;
  font-weight: 600;
  color: #00fff2;
  text-align: center;
  text-shadow: 0 0 12px rgba(0,255,255,.35);
  margin: 0 0 14px 0;
}
.film-left { text-align: center; } /* —â–æ–± –Ω–∞–∑–≤–∞ —ñ –ø–æ—Å—Ç–µ—Ä –±—É–ª–∏ –ø–æ —Ü–µ–Ω—Ç—Ä—É –ª—ñ–≤–æ—ó –∫–æ–ª–æ–Ω–∫–∏ */
.imdb-badge {
  display: inline-block;
  background: #f5c518;
  color: #000;
  font-weight: 700;
  font-size: 11px;
  border-radius: 3px;
  padding: 1px 4px;
  margin-right: 6px;
  font-family: Arial, sans-serif;
  letter-spacing: 0.5px;
  vertical-align: middle;
}
  .film-meta .imdb-badge {
  background: #f5c518 !important;
  color: #000 !important;
}
.tg-banner {
  display: flex;
  align-items: center;
  justify-content: flex-start;
  gap: 8px;
  width: 95%;
  background: #0d0d0d;
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 10px;
  padding: 10px 14px;
  color: #00fff2;
  text-decoration: none;
  font-weight: 500;
  font-size: 13.5px;
  margin: 0 auto 12px auto; /* –ø–æ —Ü–µ–Ω—Ç—Ä—É —ñ –∑ –≤—ñ–¥—Å—Ç—É–ø–æ–º */
  box-shadow: none;
  transition: none;
}

.tg-banner:hover {
  background: #0d0d0d; /* –±–µ–∑ –∑–º—ñ–Ω –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–Ω—ñ */
  transform: none;
  box-shadow: none;
}

.tg-icon {
  width: 18px;
  height: 18px;
  filter: invert(58%) sepia(82%) saturate(610%) hue-rotate(138deg) brightness(97%) contrast(97%);
}

.report-btn {
  background: transparent;
  border: none;
  color: #ff6b2b;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  float: right;
  margin-top: -34px; /* –ø—ñ–¥–Ω—ñ–º–∞—î –∫–Ω–æ–ø–∫—É –Ω–∞ —Ä—ñ–≤–µ–Ω—å —ñ–∑ –§—ñ–ª—å–º / –¢—Ä–µ–π–ª–µ—Ä */
  transition: color 0.2s ease;
}

.report-btn:hover {
  color: #ffa066;
  text-decoration: underline;
}
/* --- –º–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ --- */
.modal {
  display: none;
  position: fixed;
  z-index: 9999;
  left: 0; top: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.75);
}

.modal-content {
  background: #121212;
  color: #e0e0e0;
  margin: 10% auto;
  padding: 20px;
  border-radius: 10px;
  width: 90%;
  max-width: 400px;
  box-shadow: 0 0 15px rgba(0,0,0,0.5);
}

.modal-content h3 {
  margin-top: 0;
  color: #ff6b2b;
}

.modal-content textarea {
  width: 100%;
  background: #1b1b1b;
  border: 1px solid #444;
  color: #fff;
  border-radius: 6px;
  padding: 8px;
  resize: none;
}

.modal-buttons {
  display: flex;
  justify-content: flex-end;
  gap: 10px;
  margin-top: 12px;
}

.modal-buttons button {
  padding: 6px 12px;
  border-radius: 6px;
  border: none;
  cursor: pointer;
  font-weight: 600;
}

.modal-buttons .cancel {
  background: #333;
  color: #ccc;
}

.modal-buttons .send {
  background: #ff6b2b;
  color: #fff;
}

.close-modal {
  float: right;
  font-size: 22px;
  cursor: pointer;
  color: #777;
}
.close-modal:hover { color: #fff; }
/* ===== üí¨ –°–ï–ö–¶–Ü–Ø –ö–û–ú–ï–ù–¢–ê–†–Ü–í ===== */
.comments-section {
  margin-top: 22px;
  background: #0d0d0d;
  border: 1px solid rgba(255,255,255,0.06);
  border-radius: 12px;
  padding: 16px;

  /* üîπ –≤–∏—Ä—ñ–≤–Ω—é—î–º–æ –∑ –æ–ø–∏—Å–æ–º */
  width: calc(100% - 20px);
  margin-left: 20px;

  /* –ø—Ä–∏–±–∏—Ä–∞—î–º–æ —Ü–µ–Ω—Ç—Ä—É–≤–∞–Ω–Ω—è */
  margin-right: 0;
  max-width: none;
  box-sizing: border-box;
}


.comments-section h3 {
  color: #00fff2;
  font-size: 18px;
  margin: 0 0 12px 0;
}

/* –°–ø–∏—Å–æ–∫ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤ */
#commentsList {
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin-bottom: 14px;
}

.comment {
  background: #121212;
  border-radius: 8px;
  padding: 10px;
  color: #ddd;
  font-size: 14px;
  border: 1px solid rgba(255,255,255,0.05);
}

.comment strong { color: #eaeaea; }

.comment small {
  display: block;
  color: #777;
  margin-top: 4px;
  font-size: 12px;
}

/* –§–æ—Ä–º–∞ –¥–ª—è –Ω–∞–ø–∏—Å–∞–Ω–Ω—è */
.comment-form {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.comment-form input,
.comment-form textarea {
  background: #131313;
  color: #fff;
  border: 1px solid #333;
  border-radius: 6px;
  padding: 8px;
  resize: vertical;
}

.comment-form button {
  align-self: flex-end;
  background: #00fff2;
  color: #001c1a;
  border: none;
  border-radius: 6px;
  font-weight: 700;
  padding: 7px 14px;
  cursor: pointer;
}

.comment-form button:disabled {
  opacity: .65;
  cursor: not-allowed;
}

    
  </style>
</head>

<body>
  <!-- === HEADER === -->
  <header>
    <div class="container topbar">
      <nav class="main-nav">
        <img src="logo.png" alt="Relax Logo" class="nav-logo" />
        <a href="index.html">–ì–æ–ª–æ–≤–Ω–∞</a>

        <div class="dropdown">
          <a href="#" class="menu-films">–§—ñ–ª—å–º–∏</a>
          <div class="mega-menu">
            <div class="genres">
              <a href="#">–ë—ñ–æ–≥—Ä–∞—Ñ—ñ—è</a><a href="#">–ë–æ–π–æ–≤–∏–∫</a><a href="#">–í–µ—Å—Ç–µ—Ä–Ω</a>
              <a href="#">–í—ñ–π—Å—å–∫–æ–≤–∏–π</a><a href="#">–î–µ—Ç–µ–∫—Ç–∏–≤</a><a href="#">–î–æ–∫—É–º–µ–Ω—Ç–∞–ª—å–Ω–∏–π</a>
              <a href="#">–î—Ä–∞–º–∞</a><a href="#">–Ü—Å—Ç–æ—Ä—ñ—è</a><a href="#">–ö–æ–º–µ–¥—ñ—è</a>
              <a href="#">–ö—Ä–∏–º—ñ–Ω–∞–ª</a><a href="#">–ú–µ–ª–æ–¥—Ä–∞–º–∞</a><a href="#">–ú—ñ—Å—Ç–∏–∫–∞</a>
              <a href="#">–ú—É–∑–∏–∫–∞</a><a href="#">–ú—é–∑–∏–∫–ª</a><a href="#">–ü—Ä–∏–≥–æ–¥–∏</a>
              <a href="#">–°—ñ–º–µ–π–Ω–∏–π</a><a href="#">–°–ø–æ—Ä—Ç</a><a href="#">–¢—Ä–∏–ª–µ—Ä</a>
              <a href="#">–ñ–∞—Ö–∏</a><a href="#">–§–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞</a><a href="#">–§–µ–Ω—Ç–µ–∑—ñ</a>
              <a href="#">–ö–æ—Ä–æ—Ç–∫–æ–º–µ—Ç—Ä–∞–∂–Ω—ñ</a><a href="#">–°—É–±—Ç–∏—Ç—Ä–∏</a>
            </div>
          </div>
        </div>

        <div class="dropdown">
          <a href="#" class="menu-series">–°–µ—Ä—ñ–∞–ª–∏</a>
          <div class="mega-menu mega-series">
            <div class="genres">
              <a href="#">–ë—ñ–æ–≥—Ä–∞—Ñ—ñ—è</a><a href="#">–ë–æ–π–æ–≤–∏–∫</a><a href="#">–î–µ—Ç–µ–∫—Ç–∏–≤</a>
              <a href="#">–î—Ä–∞–º–∞</a><a href="#">–ö–æ–º–µ–¥—ñ—è</a><a href="#">–ú–µ–ª–æ–¥—Ä–∞–º–∞</a>
              <a href="#">–§–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞</a><a href="#">–ñ–∞—Ö–∏</a><a href="#">–§–µ–Ω—Ç–µ–∑—ñ</a>
            </div>
          </div>
        </div>

        <div class="dropdown">
          <a href="#" class="menu-cartoons">–ú—É–ª—å—Ç—Ñ—ñ–ª—å–º–∏</a>
          <div class="mega-menu mega-cartoons">
            <div class="genres">
              <a href="#">–î–ª—è –¥—ñ—Ç–µ–π</a><a href="#">–ü–æ–≤–Ω–æ–º–µ—Ç—Ä–∞–∂–Ω—ñ</a>
              <a href="#">–ú—É–ª—å—Ç—Å–µ—Ä—ñ–∞–ª–∏</a><a href="#">Disney</a>
              <a href="#">DreamWorks</a><a href="#">Pixar</a>
            </div>
          </div>
        </div>

        <a href="#">–ù–æ–≤–∏–Ω–∫–∏</a>
        <a href="#">–ó–±—ñ—Ä–∫–∏ —Ñ—ñ–ª—å–º—ñ–≤</a>
      </nav>
      <div class="top-right">
        <input type="text" placeholder="–ü–æ—à—É–∫‚Ä¶" class="search" />
        <button class="profile-btn">üëë –ú—ñ–π –∫–∞–±—ñ–Ω–µ—Ç</button>
      </div>
    </div>
  </header>

  <!-- === BANNER === -->
  <div class="container">
    <section class="banner-slider">
      <h2>üî• –¢–æ–ø 10 —Ñ—ñ–ª—å–º—ñ–≤</h2>
      <button class="slider-btn left" onclick="scrollSlider(-1)">‚ùÆ</button>
      <button class="slider-btn right" onclick="scrollSlider(1)">‚ùØ</button>
      <div class="slider-row" id="sliderRow">
        <div class="slide"><img src="https://i.postimg.cc/VLHxgJsg/dragon.jpg"><p>–î—Ä–∞–∫–æ–Ω –†–∞–¥–∂–∞</p></div>
        <div class="slide"><img src="https://i.postimg.cc/V6z1QntN/anemone.jpg"><p>–ê–Ω–µ–º–æ–Ω–∞</p></div>
        <div class="slide"><img src="https://i.postimg.cc/mkzLz6nK/enigma.jpg"><p>–ï–Ω—ñ–≥–º–∞</p></div>
        <div class="slide"><img src="https://i.postimg.cc/VvY5YBgJ/afterburn.jpg"><p>Afterburn</p></div>
        <div class="slide"><img src="https://i.postimg.cc/FFqXK6rL/epsilon.jpg"><p>–ï–ø—Å—ñ–ª–æ–Ω</p></div>
        <div class="slide"><img src="https://i.postimg.cc/L6PQ1RzM/volcano.jpg"><p>–°–º–µ—Ä—á—ñ 2024</p></div>
        <div class="slide"><img src="https://i.postimg.cc/qM0MYKnD/patriot.jpg"><p>–ü–∞—Ç—Ä—ñ–æ—Ç</p></div>
        <div class="slide"><img src="https://i.postimg.cc/d3zvTX6X/hero.jpg"><p>–Ü–¥–µ–∞–ª—å–Ω–∏–π –∑–ª–æ—á–∏–Ω</p></div>
        <div class="slide"><img src="https://i.postimg.cc/LX3n8M46/chains.jpg"><p>–£–≤—ñ–º–∫–Ω–∏ –º–µ–Ω–µ</p></div>
        <div class="slide"><img src="https://i.postimg.cc/Y0Lt8Tmn/freeze.jpg"><p>–¢–æ—á–∫–∞ –∑–∞–º–µ—Ä–∑–∞–Ω–Ω—è</p></div>
      </div>
    </section>
  </div>

  <!-- === MAIN === -->
  <main>
    <div class="container film-container">
      <div class="film-left">
        <h1 class="film-title" id="filmTitle">–ù–∞–∑–≤–∞ —Ñ—ñ–ª—å–º—É</h1>
        <img id="filmPoster" src="" alt="–ü–æ—Å—Ç–µ—Ä">
        <div class="film-meta">
          <span><b>–†—ñ–∫:</b> <span id="filmYear"></span></span>
          <span><b>–ñ–∞–Ω—Ä:</b> <span id="filmGenre"></span></span>
          <span><b>–ö—Ä–∞—ó–Ω–∞:</b> <span id="filmCountry"></span></span>
          <span><b>–†–µ–∂–∏—Å–µ—Ä:</b> <span id="filmDirector"></span></span>
          <span><b>–í —Ä–æ–ª—è—Ö:</b> <span id="filmCast"></span></span>
          <span><b>–ó–≤—É–∫:</b> <span id="filmSound"></span></span>
          <span><b>–¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å:</b> <span id="filmDuration"></span></span>
          <span><b>–í—ñ–∫:</b> <span id="filmAge"></span></span>
          <span>
            <span class="imdb-badge">IMDb</span>
            <span id="filmImdb"></span>
          </span>
        </div>
      </div>

      <div class="film-right">

        <!-- üîπ –¢–µ–ª–µ–≥—Ä–∞–º-–±–∞–Ω–µ—Ä -->
        <a href="https://t.me/RelaxBox_UA_bot" target="_blank" class="tg-banner">
          <img src="https://upload.wikimedia.org/wikipedia/commons/8/82/Telegram_logo.svg" alt="Telegram" class="tg-icon">
          <span>üî• –ù–æ–≤–∏–Ω–∫–∏ –≤ –∫–∞–Ω–∞–ª—ñ, –ø–µ—Ä–µ–≥–ª—è–¥ —É –±–æ—Ç—ñ ‚Äî —É—Å–µ –≤ –æ–¥–Ω–æ–º—É –º—ñ—Å—Ü—ñ!</span>
        </a>
    

        <!-- –ü–µ—Ä–µ–º–∏–∫–∞—á –§—ñ–ª—å–º / –¢—Ä–µ–π–ª–µ—Ä -->
        <div class="source-switch">
          <button id="btnMovie" class="active">üé¨ –§—ñ–ª—å–º</button>
          <button id="btnTrailer">üéûÔ∏è –¢—Ä–µ–π–ª–µ—Ä</button>
        </div>
        <!-- üü† –ö–Ω–æ–ø–∫–∞ –¥–ª—è —Å–∫–∞—Ä–≥–∏ -->
        <button id="reportBtn" class="report-btn">‚ö†Ô∏è –ü–æ–≤—ñ–¥–æ–º–∏—Ç–∏ –ø—Ä–æ –ø—Ä–æ–±–ª–µ–º—É</button>

        <div class="player-box">
  <div class="player-wrapper" style="position:relative;">
    <video id="filmPlayer" controls playsinline muted crossorigin="anonymous" preload="metadata"
      style="border-radius:12px;width:100%;aspect-ratio:16/9;display:block;"></video>

    <!-- üîπ –í–µ–ª–∏–∫–∞ –∫–Ω–æ–ø–∫–∞ Play –ø–æ–≤–µ—Ä—Ö –≤—ñ–¥–µ–æ -->
    <div id="bigPlayBtn"
         style="position:absolute;inset:0;display:flex;align-items:center;justify-content:center;
                background:rgba(0,0,0,0.45);cursor:pointer;border-radius:12px;
                transition:opacity 0.3s ease;">
      <div style="width:100px;height:100px;border-radius:50%;background:rgba(0,0,0,0.6);
                  display:flex;align-items:center;justify-content:center;
                  box-shadow:0 0 25px rgba(0,255,255,0.5);">
        <svg width="58" height="58" viewBox="0 0 24 24" fill="#00fff2">
          <path d="M8 5v14l11-7z"/>
        </svg>
      </div>
    </div>
  </div>
</div>


        <div class="film-description">
          <h3>–ü—Ä–æ —â–æ —Ñ—ñ–ª—å–º:</h3>
          <p id="filmDesc">–û–ø–∏—Å —Ñ—ñ–ª—å–º—É...</p>
        </div>
      </div>
    </div>
  </main>
  <div class="film-right">
  <div class="film-title" id="filmTitle"></div>
  <div class="film-desc" id="filmDesc"></div>

  <!-- üí¨ –ö–æ–º–µ–Ω—Ç–∞—Ä—ñ -->
  <div class="comments-section">
    <h3>üí¨ –ö–æ–º–µ–Ω—Ç–∞—Ä—ñ</h3>

    <!-- —Å–ø–∏—Å–æ–∫ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤ -->
    <div id="commentsList"></div>

    <!-- —Ñ–æ—Ä–º–∞ -->
    <div class="comment-form">
      <input type="text" id="username" placeholder="–í–∞—à–µ —ñ–º‚Äô—è (–Ω–µ–æ–±–æ–≤‚Äô—è–∑–∫–æ–≤–æ)">
      <textarea id="commentText" placeholder="–ù–∞–ø–∏—à—ñ—Ç—å —Å–≤—ñ–π –∫–æ–º–µ–Ω—Ç–∞—Ä..." rows="3"></textarea>
      <button id="sendComment">–ù–∞–¥—ñ—Å–ª–∞—Ç–∏</button>
    </div>
  </div>
</div>


  <footer>¬© 2025 KinoSite ‚Ä¢ –£—Å—ñ –ø—Ä–∞–≤–∞ –∑–∞—Ö–∏—â–µ–Ω—ñ</footer>

  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script>
    const supabaseUrl = "https://zerlqvbmqszomlondlte.supabase.co";
    const supabaseKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InplcmxxdmJtcXN6b21sb25kbHRlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUzMzg3NzQsImV4cCI6MjA3MDkxNDc3NH0.8wUBYIeQRC6KVp6vdzv0oqofIf4PeZyzbV5GcD0vxTE";
    const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);

    let hls = null;                   // –ø–æ—Ç–æ—á–Ω–∏–π Hls-—ñ–Ω—Å—Ç–∞–Ω—Å (—â–æ–± –∫–æ—Ä–µ–∫—Ç–Ω–æ —Ä—É–π–Ω—É–≤–∞—Ç–∏)
    let currentSource = "movie";      // 'movie' –∞–±–æ 'trailer'
    let movieUrl = "";                // –≥–æ–ª–æ–≤–Ω–∏–π –ø–æ—Ç—ñ–∫
    let trailerUrl = "";              // —Ç—Ä–µ–π–ª–µ—Ä

    // –£—Ç–∏–ª—ñ—Ç–∞: –∑–Ω–∏—â–µ–Ω–Ω—è Hls –ø—Ä–∏ –ø–µ—Ä–µ–º–∏–∫–∞–Ω–Ω—ñ
    function destroyHls() {
      if (hls) {
        try { hls.destroy(); } catch(e) {}
        hls = null;
      }
    }
// YouTube helpers
function isYouTube(url) {
  return /youtube\.com|youtu\.be|googlevideo\.com/.test(url || "");
}

// –°–ø—Ä–æ–±—É–≤–∞—Ç–∏ –≤–∏—Ç—è–≥–Ω—É—Ç–∏ YouTube ID –∑ —Ä—ñ–∑–Ω–∏—Ö —Ñ–æ—Ä–º–∞—Ç—ñ–≤ (watch?v=, youtu.be/, embed/)
function getYouTubeId(url) {
  if (!url) return "";
  // –∫–ª–∞—Å–∏—á–Ω—ñ —Ñ–æ—Ä–º–∞—Ç–∏
  const m1 = url.match(/(?:v=|\/)([0-9A-Za-z_-]{11})(?:[?&]|$)/);
  if (m1) return m1[1];
  // —è–∫—â–æ –∫–∏–Ω—É–ª–∏ —á–∏—Å—Ç–∏–π ID - 11 —Å–∏–º–≤–æ–ª—ñ–≤
  const m2 = url.match(/^[0-9A-Za-z_-]{11}$/);
  if (m2) return m2[0];
  return ""; // –¥–ª—è googlevideo –∫—Ä–∞—â–µ –≤–Ω–æ—Å–∏—Ç–∏ –Ω–æ—Ä–º–∞–ª—å–Ω–∏–π YouTube-URL —É —Ç–∞–±–ª–∏—Ü—é
}

    // –£–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–∂–µ—Ä–µ–ª–∞ –¥–æ <video>
    function setupPlayer(url) {
      const player = document.getElementById("filmPlayer");
      destroyHls();                   // –≤–∏–º–∏–∫–∞—î–º–æ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–π —ñ–Ω—Å—Ç–∞–Ω—Å

      // –û–±–Ω—É–ª—è—î–º–æ src —ñ –ø–∞—É–∑–∏–º–æ
      try { player.pause(); } catch(e) {}
      player.removeAttribute("src");
      player.load();

      if (!url) {
        console.warn("–ü–æ—Ä–æ–∂–Ω—ñ–π URL –¥–ª—è –≤—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è");
        return;
      }

      if (url.endsWith(".m3u8")) {
        if (window.Hls && Hls.isSupported()) {
          hls = new Hls({
            maxBufferLength: 30,
            enableWorker: true,
            lowLatencyMode: true,
            xhrSetup: function (xhr, url) {
              xhr.withCredentials = false;
              xhr.setRequestHeader("Origin", "https://relax-time2.onrender.com");
              xhr.setRequestHeader("Referer", "https://relax-time2.onrender.com");
            }
          });
          hls.loadSource(url);
          hls.attachMedia(player);
        } else if (player.canPlayType("application/vnd.apple.mpegurl")) {
          player.src = url; // Safari / iOS
        } else {
          console.error("–¶–µ–π –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î HLS –±–µ–∑ hls.js");
        }
      } else {
        // MP4 —Ç–∞ —ñ–Ω—à—ñ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏
        player.src = url;
      }

      // –ê–≤—Ç–æ–≤—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤–∏–º–∫–Ω–µ–Ω–æ ‚Äî –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á —Å–∞–º –Ω–∞—Ç–∏—Å–Ω–µ Play
        // üé¨ –î–æ–¥–∞—î–º–æ –≤–µ–ª–∏–∫—É –∫–Ω–æ–ø–∫—É Play –ø–æ–≤–µ—Ä—Ö –≤—ñ–¥–µ–æ
  const wrapper = player.parentElement;

  // –Ø–∫—â–æ –∫–Ω–æ–ø–∫–∏ —â–µ –Ω–µ–º–∞ ‚Äî —Å—Ç–≤–æ—Ä—é—î–º–æ
  if (!wrapper.querySelector("#bigPlayBtn")) {
    const bigPlay = document.createElement("div");
    bigPlay.id = "bigPlayBtn";
    bigPlay.innerHTML = `
      <div style="
        position:absolute;inset:0;display:flex;align-items:center;justify-content:center;
        background:rgba(0,0,0,0.45);cursor:pointer;border-radius:12px;
        transition:opacity 0.3s ease;">
        <div style="
          width:100px;height:100px;border-radius:50%;background:rgba(0,0,0,0.6);
          display:flex;align-items:center;justify-content:center;
          box-shadow:0 0 25px rgba(0,255,255,0.5);">
          <svg width="58" height="58" viewBox="0 0 24 24" fill="#00fff2">
            <path d="M8 5v14l11-7z"/>
          </svg>
        </div>
      </div>
    `;
    wrapper.appendChild(bigPlay);

    // –ü–æ–¥—ñ—ó
    const overlay = bigPlay.firstElementChild;
    overlay.addEventListener("click", async () => {
      try {
        await player.play();
        overlay.style.opacity = "0";
        overlay.style.pointerEvents = "none";
      } catch (err) {
        console.warn("–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –≤—ñ–¥–µ–æ:", err);
      }
    });

    player.addEventListener("play", () => {
      overlay.style.opacity = "0";
      overlay.style.pointerEvents = "none";
    });

    player.addEventListener("pause", () => {
      overlay.style.opacity = "1";
      overlay.style.pointerEvents = "auto";
    });
  }

    }

   async function loadFilm() {
  const params = new URLSearchParams(window.location.search);
  const idParam = params.get("id");

  console.log("üîé URL id =", idParam); // –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

  let data = null, error = null;

  try {
    if (idParam) {
      // –Ø–∫—â–æ id —î –≤ URL ‚Äî –±–µ—Ä–µ–º–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π –∑–∞–ø–∏—Å
      const idNum = isNaN(Number(idParam)) ? idParam : Number(idParam);
      ({ data, error } = await supabase
        .from("films_site")
        .select("*")
        .eq("id", idNum)
        .single());
    } else {
      // Fallback: —è–∫—â–æ id –ù–ï –ø–µ—Ä–µ–¥–∞–ª–∏ ‚Äî –±–µ—Ä–µ–º–æ –æ—Å—Ç–∞–Ω–Ω—ñ–π –∑–∞–ø–∏—Å (–¥–µ —î title)
      ({ data, error } = await supabase
        .from("films_site")
        .select("*")
        .order("id", { ascending: false })
        .limit(1)
        .maybeSingle());
    }
  } catch (e) {
    console.error("‚ùå –í–∏–Ω—è—Ç–æ–∫ Supabase:", e);
  }

  if (error || !data) {
    console.error("‚ùå –ü–æ–º–∏–ª–∫–∞ Supabase:", error?.message || "–ø–æ—Ä–æ–∂–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥—å");
    document.getElementById("filmTitle").textContent = "–§—ñ–ª—å–º –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ";
    return;
  }

  // üü¢ –ó–∞–ø–æ–≤–Ω–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö
  document.getElementById("filmPoster").src = data.poster || "";
  document.getElementById("filmTitle").textContent = data.title || "";
  document.getElementById("filmDesc").textContent = data.description || "–û–ø–∏—Å –≤—ñ–¥—Å—É—Ç–Ω—ñ–π";
  document.getElementById("filmYear").textContent = data.year || "";
  document.getElementById("filmGenre").textContent = data.genre || "";
  document.getElementById("filmCountry").textContent = data.country || "";
  document.getElementById("filmDirector").textContent = data.director || "";
  document.getElementById("filmCast").textContent = data.cast || "";
  document.getElementById("filmSound").textContent = data.sound || "";
  document.getElementById("filmDuration").textContent = data.duration || "";
  document.getElementById("filmAge").textContent = data.age || "";
  document.getElementById("filmImdb").textContent = data.imdb || "‚Äî";

  // üîó –î–∂–µ—Ä–µ–ª–∞
  movieUrl   = data.stream_url   || "";
  trailerUrl = data.trailer_url  || "";

  // üéõÔ∏è –ö–Ω–æ–ø–∫–∏
  const btnMovie   = document.getElementById("btnMovie");
  const btnTrailer = document.getElementById("btnTrailer");

  btnMovie.classList.add("active");
  btnTrailer.classList.remove("active");
  btnTrailer.disabled = !trailerUrl;

  // ‚ñ∂Ô∏è –ü–æ—á–∞—Ç–∫–æ–≤–æ –ø–æ–∫–∞–∑—É—î–º–æ –§–Ü–õ–¨–ú —É –∑–≤–∏—á–∞–π–Ω–æ–º—É –≤—ñ–¥–µ–æ-–ø–ª–µ—î—Ä—ñ (–±–µ–∑ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫—É)
  currentSource = "movie";
  document.querySelector(".player-box").innerHTML =
    `<video id="filmPlayer" controls playsinline muted crossorigin="anonymous" preload="metadata"></video>`;
  setupPlayer(movieUrl);

  // üñ±Ô∏è –û–±—Ä–æ–±–Ω–∏–∫–∏ –∫–ª—ñ–∫—ñ–≤
  btnMovie.addEventListener("click", () => {
    if (currentSource === "movie") return;
    currentSource = "movie";
    btnMovie.classList.add("active");
    btnTrailer.classList.remove("active");
    const box = document.querySelector(".player-box");
    box.innerHTML = `<video id="filmPlayer" controls playsinline muted crossorigin="anonymous" preload="metadata"></video>`;
    setupPlayer(movieUrl);
  });

  btnTrailer.addEventListener("click", () => {
    if (!trailerUrl) return;
    if (currentSource === "trailer") return;
    currentSource = "trailer";
    btnTrailer.classList.add("active");
    btnMovie.classList.remove("active");

    const box = document.querySelector(".player-box");

    // –Ø–∫—â–æ —Ç—Ä–µ–π–ª–µ—Ä –∑ YouTube/GoogleVideo ‚Äî –ø–æ–∫–∞–∑—É—î–º–æ iframe
    if (
      trailerUrl.includes("youtube.com") ||
      trailerUrl.includes("youtu.be") ||
      trailerUrl.includes("googlevideo.com")
    ) {
      // –°–ø—Ä–æ–±–∞ –≤–∏—Ç—è–≥–Ω—É—Ç–∏ YouTube ID
      const m = trailerUrl.match(/(?:v=|\/)([0-9A-Za-z_-]{11})/);
      const ytId = m ? m[1] : "";
      const src = ytId ? `https://www.youtube.com/embed/${ytId}` : trailerUrl;

      box.innerHTML = `
        <iframe
          width="100%" height="480"
          src="${src}"
          frameborder="0"
          allow="autoplay; encrypted-media"
          allowfullscreen
          style="border-radius:12px;width:100%;aspect-ratio:16/9;">
        </iframe>`;
    } else {
      // –Ü–Ω–∞–∫—à–µ ‚Äî –∑–≤–∏—á–∞–π–Ω–∏–π –≤—ñ–¥–µ–æ-–ø–ª–µ—î—Ä
      box.innerHTML = `<video id="filmPlayer" controls playsinline muted crossorigin="anonymous"></video>`;
      setupPlayer(trailerUrl);
    }
  });
  
}


    function scrollSlider(direction) {
      const slider = document.getElementById("sliderRow");
      const scrollAmount = 300;
      slider.scrollBy({ left: scrollAmount * direction, behavior: "smooth" });
    }

    // –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å—Ç–æ—Ä—ñ–Ω–∫–∏
    loadFilm();
  </script>
<!-- üßæ –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ -->
<div id="reportModal" class="modal">
  <div class="modal-content">
    <span class="close-modal">&times;</span>
    <h3>–ù–∞–¥—ñ—Å–ª–∞—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∞–¥–º—ñ–Ω—É</h3>
    <p>–û–ø–∏—à–∏ –∫–æ—Ä–æ—Ç–∫–æ, —â–æ –Ω–µ –ø—Ä–∞—Ü—é—î –∞–±–æ —è–∫–∞ –≤–∏–Ω–∏–∫–ª–∞ –ø–æ–º–∏–ª–∫–∞:</p>
    <textarea id="reportText" rows="4" placeholder="–ù–∞–ø–∏—à–∏ —Ç—É—Ç..."></textarea>
    <div class="modal-buttons">
      <button id="cancelReport" class="cancel">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
      <button id="sendReport" class="send">–ù–∞–¥—ñ—Å–ª–∞—Ç–∏</button>
    </div>
  </div>
</div>
<script>
const modal = document.getElementById("reportModal");
const reportBtn = document.getElementById("reportBtn");
const closeBtn = document.querySelector(".close-modal");
const cancelBtn = document.getElementById("cancelReport");
const sendBtn = document.getElementById("sendReport");
const textArea = document.getElementById("reportText");

// –í—ñ–¥–∫—Ä–∏—Ç–∏
reportBtn.onclick = () => {
  modal.style.display = "block";
  textArea.value = "";
};

// –ó–∞–∫—Ä–∏—Ç–∏
closeBtn.onclick = () => modal.style.display = "none";
cancelBtn.onclick = () => modal.style.display = "none";

// –ù–∞–¥—ñ—Å–ª–∞—Ç–∏ (–ø–æ–∫–∏ –ø—Ä–æ—Å—Ç–æ –∑–∞–∫—Ä–∏–≤–∞—î, –º–æ–∂–Ω–∞ –ø—ñ–∑–Ω—ñ—à–µ –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏ Telegram API –∞–±–æ email)
sendBtn.onclick = () => {
  alert("–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –Ω–∞–¥—ñ—Å–ª–∞–Ω–æ –∞–¥–º—ñ–Ω—É!");
  modal.style.display = "none";
};

// –ó–∞–∫—Ä–∏—Ç—Ç—è –ø–æ –∫–ª—ñ–∫—É –ø–æ–∑–∞ –≤—ñ–∫–Ω–æ–º
window.onclick = (e) => {
  if (e.target == modal) modal.style.display = "none";
};
</script>
<script type="module">
import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm';

const supabaseUrl = 'https://zerlqvbmqszomlondlte.supabase.co';   // üîπ –∑–∞–º—ñ–Ω–∏ –Ω–∞ —Å–≤–æ—é –∞–¥—Ä–µ—Å—É
const supabaseKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InplcmxxdmJtcXN6b21sb25kbHRlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUzMzg3NzQsImV4cCI6MjA3MDkxNDc3NH0.8wUBYIeQRC6KVp6vdzv0oqofIf4PeZyzbV5GcD0vxTE";                      // üîπ –≤—Å—Ç–∞–≤ —Å–≤—ñ–π anon –∫–ª—é—á
const supabase = createClient(supabaseUrl, supabaseKey);

// –û—Ç—Ä–∏–º—É—î–º–æ ID —Ñ—ñ–ª—å–º—É –∑ URL (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥ ?id=5)
const filmId = new URLSearchParams(window.location.search).get("id");

// HTML –µ–ª–µ–º–µ–Ω—Ç–∏
const commentsList = document.getElementById("commentsList");
const sendBtn = document.getElementById("sendComment");

// ===== üì• –ó–ê–í–ê–ù–¢–ê–ñ–ò–¢–ò –ö–û–ú–ï–ù–¢–ê–†–Ü =====
async function loadComments() {
  commentsList.innerHTML = "<p style='color:#777'>–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</p>";

  const { data, error } = await supabase
    .from('comments')
    .select('*')
    .eq('film_id', filmId)
    .order('created_at', { ascending: false });

  if (error) {
    console.error("–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è:", error);
    commentsList.innerHTML = "<p style='color:#c66'>–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ üòï</p>";
    return;
  }

  if (!data || data.length === 0) {
    commentsList.innerHTML = "<p style='color:#888'>–©–µ –Ω–µ–º–∞—î –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤. –ë—É–¥—å –ø–µ—Ä—à–∏–º!</p>";
    return;
  }

  // –æ—á–∏—â—É—î–º–æ —ñ –¥–æ–¥–∞—î–º–æ
  commentsList.innerHTML = "";
  for (const c of data) {
    const div = document.createElement("div");
    div.className = "comment";
    div.innerHTML = `
      <strong>${c.username || "–ê–Ω–æ–Ω—ñ–º"}</strong>
      <p>${c.text}</p>
      <small>${new Date(c.created_at).toLocaleString()}</small>
    `;
    commentsList.appendChild(div);
  }
}

// ===== üì§ –ù–ê–î–Ü–°–õ–ê–¢–ò –ö–û–ú–ï–ù–¢–ê–† =====
sendBtn.addEventListener("click", async () => {
  const username = document.getElementById("username").value.trim() || "–ê–Ω–æ–Ω—ñ–º";
  const text = document.getElementById("commentText").value.trim();

  if (!text) return alert("–í–≤–µ–¥–∏ –∫–æ–º–µ–Ω—Ç–∞—Ä üôÇ");

  // –≤—Å—Ç–∞–≤–ª—è—î–º–æ –≤ –±–∞–∑—É
  const { error } = await supabase
    .from('comments')
    .insert([{ film_id: filmId, username, text }]);

  if (error) {
    console.error("–ü–æ–º–∏–ª–∫–∞ –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è:", error);
    alert("–ù–µ –≤–¥–∞–ª–æ—Å—è –Ω–∞–¥—ñ—Å–ª–∞—Ç–∏ üòï");
  } else {
    document.getElementById("commentText").value = "";
    loadComments(); // –æ–Ω–æ–≤–∏—Ç–∏ —Å–ø–∏—Å–æ–∫
  }
});

// –ó–∞–ø—É—Å–∫–∞—î–º–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø—Ä–∏ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏
loadComments();
</script>

</body>
</html>
